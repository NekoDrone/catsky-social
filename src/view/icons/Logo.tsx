import React from 'react'
import {StyleSheet, type TextProps} from 'react-native'
import Svg, {Path, type PathProps, type SvgProps} from 'react-native-svg'
import {Image} from 'expo-image'

import {useKawaiiMode} from '#/state/preferences/kawaii'
import {useTheme} from '#/alf'

const ratio = 57 / 64

type Props = {
  fill?: PathProps['fill']
  style?: TextProps['style']
} & Omit<SvgProps, 'style'>

export const Logo = React.forwardRef(function LogoImpl(props: Props, ref) {
  const theme = useTheme()
  const {fill, ...rest} = props
  const gradient = fill === 'sky'
  const styles = StyleSheet.flatten(props.style)
  const _fill = gradient
    ? 'url(#sky)'
    : fill || styles?.color || theme.palette.primary_500
  // @ts-ignore it's fiiiiine
  const size = parseInt(rest.width || 32)

  const isKawaii = useKawaiiMode()

  if (isKawaii) {
    return (
      <Image
        source={
          size > 100
            ? require('../../../assets/kawaii.png')
            : require('../../../assets/kawaii_smol.png')
        }
        accessibilityLabel="Bluesky"
        accessibilityHint=""
        accessibilityIgnoresInvertColors
        style={[{height: size, aspectRatio: 1.4}]}
      />
    )
  }

  return (
    <Svg
      fill="none"
      // @ts-ignore it's fiiiiine
      ref={ref}
      viewBox="0 0 64 64"
      {...rest}
      style={[{width: size, height: size * ratio}, styles]}>
      <Path
        fill={_fill}
        d="m 16.161994,43.872871 -1.224499,0.795377 -0.0039,0.0043 c -0.405665,0.279253 -0.757072,0.557439 -1.016381,0.802797 -0.129655,0.122679 -0.235296,0.233057 -0.326039,0.359227 -0.04537,0.06309 -0.0887,0.126173 -0.129634,0.236232 -0.04093,0.110061 -0.09462,0.33528 0.01718,0.566174 l 0.06677,0.13432 c 0.11174,0.230754 0.299833,0.287449 0.400226,0.300268 0.100392,0.01282 0.168112,0.0016 0.236621,-0.01367 0.13702,-0.03054 0.269343,-0.0845 0.423265,-0.156966 0.305048,-0.143632 0.681622,-0.365405 1.083151,-0.641145 l 0.0098,-0.007 1.398256,-0.910174 c -0.34456,-0.477079 -0.657218,-0.967676 -0.934774,-1.46971 z"
        id="path71"
      />
      <Path
        fill={_fill}
        d="m 51.539309,43.851788 c -0.282687,0.498915 -0.600627,0.986328 -0.950783,1.46034 l 1.455263,0.947658 c 0.401529,0.275739 0.778103,0.497513 1.083151,0.641145 0.153922,0.07248 0.286244,0.126425 0.423264,0.156966 0.06851,0.01527 0.138182,0.02649 0.238575,0.01367 0.09983,-0.01275 0.286702,-0.07037 0.398664,-0.297925 l 0.002,-0.0023 0.06481,-0.13432 h 0.002 c 0.111803,-0.230893 0.05811,-0.456116 0.01718,-0.566174 -0.04093,-0.110061 -0.08426,-0.173147 -0.129635,-0.236232 -0.09075,-0.126171 -0.196774,-0.236548 -0.326429,-0.359227 -0.259395,-0.245389 -0.6108,-0.523574 -1.016467,-0.802827 l -0.0055,-0.0047 z"
        id="path62"
      />
      <Path
        fill={_fill}
        d="m 52.980515,39.692944 c -0.08276,0.616433 -0.22187,1.225255 -0.412331,1.823472 h 1.920698 c 0.468509,0 0.890886,-0.0325 1.218251,-0.09058 0.163684,-0.02904 0.301569,-0.06068 0.433026,-0.115975 0.06573,-0.02764 0.130093,-0.05671 0.211632,-0.127682 0.08154,-0.07098 0.221394,-0.233793 0.221394,-0.500185 v -0.156577 c 0,-0.266391 -0.139821,-0.427272 -0.221394,-0.498234 -0.08157,-0.07096 -0.145901,-0.102016 -0.211632,-0.129634 -0.131463,-0.05523 -0.269356,-0.08698 -0.433026,-0.115963 -0.327338,-0.05796 -0.749798,-0.08864 -1.218251,-0.08864 z"
        id="path61"
      />
      <Path
        fill={_fill}
        d="m 13.244048,39.692944 c -0.468452,0 -0.889351,0.03068 -1.21669,0.08864 -0.163669,0.02899 -0.301562,0.06074 -0.433025,0.115963 -0.06573,0.02761 -0.130061,0.05867 -0.211633,0.129634 -0.08157,0.07096 -0.221002,0.231843 -0.221002,0.498235 v 0.156576 c 0,0.266392 0.139462,0.429212 0.221002,0.500186 0.08154,0.07098 0.145905,0.100037 0.211633,0.127681 0.131457,0.05529 0.269342,0.08693 0.433025,0.115975 0.327366,0.05808 0.748182,0.09058 1.21669,0.09058 h 1.907032 c -0.185127,-0.59869 -0.320273,-1.207565 -0.400618,-1.823472 z"
        id="path60"
      />
      <Path
        fill={_fill}
        d="m 54.517386,33.331095 c -0.288434,0 -0.463159,0.107395 -0.739932,0.249898 -0.276773,0.142496 -0.600065,0.340031 -0.942192,0.575546 l -0.563441,0.387731 c 0.241415,0.550415 0.431989,1.123162 0.566174,1.716876 l 0.762188,-0.524395 c 0.405668,-0.279253 0.757071,-0.55978 1.016381,-0.805139 0.129655,-0.122678 0.235296,-0.233058 0.326039,-0.359229 0.04537,-0.06309 0.08871,-0.126171 0.129634,-0.236231 0.04093,-0.110061 0.09462,-0.333333 -0.01718,-0.564222 l -0.06677,-0.136272 c -0.138132,-0.284601 -0.36175,-0.304563 -0.46895,-0.304563 z"
        id="path55"
      />
      <Path
        fill={_fill}
        d="m 13.215544,33.331095 c -0.107302,2.44e-4 -0.3332,0.0238 -0.469339,0.304563 l -0.06677,0.136272 c -0.111806,0.23089 -0.05968,0.454162 -0.01874,0.564222 0.04093,0.110061 0.08622,0.173145 0.131587,0.236231 0.09075,0.126171 0.194431,0.236551 0.324086,0.359229 0.25931,0.245359 0.612667,0.525886 1.018333,0.805139 l 0.769606,0.52947 c 0.138651,-0.58985 0.335293,-1.158459 0.583746,-1.70438 v -3.9e-4 l -0.588821,-0.404912 c -0.34232,-0.235647 -0.666867,-0.43303 -0.943755,-0.575546 -0.276888,-0.142516 -0.450747,-0.250554 -0.739931,-0.249898 z"
        id="path52"
      />
      <Path
        fill={_fill}
        d="m 34.094764,28.251437 c -4.933274,0 -9.445323,1.119371 -12.639234,2.985345 -3.193912,1.865974 -4.96476,4.339386 -4.96476,7.151086 0,2.835836 1.76833,5.998454 4.873902,8.447917 3.10557,2.449462 7.477748,4.141309 12.350244,4.141309 4.872496,0 9.325343,-1.692812 12.509438,-4.147035 3.184095,-2.454222 5.018588,-5.625664 5.018588,-8.442191 0,-2.840663 -1.672275,-5.299374 -4.746776,-7.158721 -3.074501,-1.859346 -7.468126,-2.97771 -12.401402,-2.97771 z"
        id="path45"
      />
      <Path
        fill={_fill}
        d="m 45.888887,14.9683 c -0.01975,-4.81e-4 -0.03913,2.8e-5 -0.05857,3.91e-4 -0.09592,0.0017 -0.186845,0.005 -0.281525,0.06325 -0.324225,0.199518 -0.657344,0.622035 -0.969525,1.028876 -0.785036,1.023073 -1.590677,2.594779 -2.835558,4.699638 -0.562846,0.951667 -1.547594,3.050937 -2.609088,5.423561 3.239259,0.500131 6.133956,1.490417 8.476999,2.907403 1.428388,0.863838 2.666296,1.909965 3.631326,3.113179 -0.783688,-2.912149 -1.69148,-6.450064 -2.253765,-8.589842 -0.853248,-3.247037 -1.4618,-5.815916 -2.169816,-7.350117 -0.24818,-0.537783 -0.432298,-1.042926 -0.759844,-1.253002 -0.05207,-0.0334 -0.111382,-0.0419 -0.170634,-0.04334 z"
        id="path43"
      />
      <Path
        fill={_fill}
        d="m 21.844825,14.9683 c -0.05925,0.0015 -0.118559,0.0099 -0.170634,0.04334 -0.327547,0.210076 -0.511665,0.715218 -0.759846,1.253002 -0.708014,1.534201 -1.316565,4.10308 -2.169814,7.350117 -0.573505,2.182475 -1.506534,5.819634 -2.30062,8.763599 1.028936,-1.280829 2.372768,-2.386873 3.923393,-3.292793 2.317508,-1.353954 5.141324,-2.318786 8.260291,-2.836729 -1.072493,-2.399061 -2.070038,-4.528088 -2.637983,-5.488378 -1.244881,-2.104859 -2.050129,-3.676565 -2.835167,-4.699638 -0.312181,-0.406841 -0.6453,-0.829358 -0.969525,-1.028876 -0.09468,-0.05822 -0.185605,-0.06147 -0.281526,-0.06325 -0.01945,-3.64e-4 -0.03882,-8.72e-4 -0.05856,-3.92e-4 z"
        id="path42"
      />
    </Svg>
  )
})
